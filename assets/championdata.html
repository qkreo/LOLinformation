<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>챔피언분석</title>
	<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
	        crossorigin="anonymous"></script>
</head>

<style>
	.champ_Box {
		float: left ;
		width : 80px;
		border: 1px solid;
		border-color: #555cd3;
	}

	.champ_Box2 {
		float : left ;
		width : 80px;
		border: 1px solid;
		border-color: #555cd3;
	}

	.clear{
		content: '';
		display : block ;
		clear : both
	}


</style>


<script>
	const data = [
		{"id":266,"engName":"Aatrox"},
		{"id":103,"engName":"Ahri"},
		{"id":84,"engName":"Akali"},
		{"id":166,"engName":"Akshan"},
		{"id":12,"engName":"Alistar"},
		{"id":32,"engName":"Amumu"},
		{"id":34,"engName":"Anivia"},
		{"id":1,"engName":"Annie"},
		{"id":523,"engName":"Aphelios"},
		{"id":22,"engName":"Ashe"},
		{"id":136,"engName":"AurelionSol"},
		{"id":268,"engName":"Azir"},
		{"id":432,"engName":"Bard"},
		{"id":200,"engName":"Belveth"},
		{"id":53,"engName":"Blitzcrank"},
		{"id":63,"engName":"Brand"},
		{"id":201,"engName":"Braum"},
		{"id":51,"engName":"Caitlyn"},
		{"id":164,"engName":"Camille"},
		{"id":69,"engName":"Cassiopeia"},
		{"id":31,"engName":"Chogath"},
		{"id":42,"engName":"Corki"},
		{"id":122,"engName":"Darius"},
		{"id":131,"engName":"Diana"},
		{"id":119,"engName":"Draven"},
		{"id":36,"engName":"DrMundo"},
		{"id":245,"engName":"Ekko"},
		{"id":60,"engName":"Elise"},
		{"id":28,"engName":"Evelynn"},
		{"id":81,"engName":"Ezreal"},
		{"id":9,"engName":"Fiddlesticks"},
		{"id":114,"engName":"Fiora"},
		{"id":105,"engName":"Fizz"},
		{"id":3,"engName":"Galio"},
		{"id":41,"engName":"Gangplank"},
		{"id":86,"engName":"Garen"},
		{"id":150,"engName":"Gnar"},
		{"id":79,"engName":"Gragas"},
		{"id":104,"engName":"Graves"},
		{"id":887,"engName":"Gwen"},
		{"id":120,"engName":"Hecarim"},
		{"id":74,"engName":"Heimerdinger"},
		{"id":420,"engName":"Illaoi"},
		{"id":39,"engName":"Irelia"},
		{"id":427,"engName":"Ivern"},
		{"id":40,"engName":"Janna"},
		{"id":59,"engName":"JarvanIV"},
		{"id":24,"engName":"Jax"},
		{"id":126,"engName":"Jayce"},
		{"id":202,"engName":"Jhin"},
		{"id":222,"engName":"Jinx"},
		{"id":145,"engName":"Kaisa"},
		{"id":429,"engName":"Kalista"},
		{"id":43,"engName":"Karma"},
		{"id":30,"engName":"Karthus"},
		{"id":38,"engName":"Kassadin"},
		{"id":55,"engName":"Katarina"},
		{"id":10,"engName":"Kayle"},
		{"id":141,"engName":"Kayn"},
		{"id":85,"engName":"Kennen"},
		{"id":121,"engName":"Khazix"},
		{"id":203,"engName":"Kindred"},
		{"id":240,"engName":"Kled"},
		{"id":96,"engName":"KogMaw"},
		{"id":897,"engName":"KSante"},
		{"id":7,"engName":"Leblanc"},
		{"id":64,"engName":"LeeSin"},
		{"id":89,"engName":"Leona"},
		{"id":876,"engName":"Lillia"},
		{"id":127,"engName":"Lissandra"},
		{"id":236,"engName":"Lucian"},
		{"id":117,"engName":"Lulu"},
		{"id":99,"engName":"Lux"},
		{"id":54,"engName":"Malphite"},
		{"id":90,"engName":"Malzahar"},
		{"id":57,"engName":"Maokai"},
		{"id":11,"engName":"MasterYi"},
		{"id":21,"engName":"MissFortune"},
		{"id":62,"engName":"MonkeyKing"},
		{"id":82,"engName":"Mordekaiser"},
		{"id":25,"engName":"Morgana"},
		{"id":267,"engName":"Nami"},
		{"id":75,"engName":"Nasus"},
		{"id":111,"engName":"Nautilus"},
		{"id":518,"engName":"Neeko"},
		{"id":76,"engName":"Nidalee"},
		{"id":895,"engName":"Nilah"},
		{"id":56,"engName":"Nocturne"},
		{"id":20,"engName":"Nunu"},
		{"id":2,"engName":"Olaf"},
		{"id":61,"engName":"Orianna"},
		{"id":516,"engName":"Ornn"},
		{"id":80,"engName":"Pantheon"},
		{"id":78,"engName":"Poppy"},
		{"id":555,"engName":"Pyke"},
		{"id":246,"engName":"Qiyana"},
		{"id":133,"engName":"Quinn"},
		{"id":497,"engName":"Rakan"},
		{"id":33,"engName":"Rammus"},
		{"id":421,"engName":"RekSai"},
		{"id":526,"engName":"Rell"},
		{"id":888,"engName":"Renata"},
		{"id":58,"engName":"Renekton"},
		{"id":107,"engName":"Rengar"},
		{"id":92,"engName":"Riven"},
		{"id":68,"engName":"Rumble"},
		{"id":13,"engName":"Ryze"},
		{"id":360,"engName":"Samira"},
		{"id":113,"engName":"Sejuani"},
		{"id":235,"engName":"Senna"},
		{"id":147,"engName":"Seraphine"},
		{"id":875,"engName":"Sett"},
		{"id":35,"engName":"Shaco"},
		{"id":98,"engName":"Shen"},
		{"id":102,"engName":"Shyvana"},
		{"id":27,"engName":"Singed"},
		{"id":14,"engName":"Sion"},
		{"id":15,"engName":"Sivir"},
		{"id":72,"engName":"Skarner"},
		{"id":37,"engName":"Sona"},
		{"id":50,"engName":"Swain"},
		{"id":517,"engName":"Sylas"},
		{"id":134,"engName":"Syndra"},
		{"id":223,"engName":"TahmKench"},
		{"id":163,"engName":"Taliyah"},
		{"id":91,"engName":"Talon"},
		{"id":44,"engName":"Taric"},
		{"id":17,"engName":"Teemo"},
		{"id":412,"engName":"Thresh"},
		{"id":18,"engName":"Tristana"},
		{"id":48,"engName":"Trundle"},
		{"id":23,"engName":"Tryndamere"},
		{"id":4,"engName":"TwistedFate"},
		{"id":29,"engName":"Twitch"},
		{"id":77,"engName":"Udyr"},
		{"id":6,"engName":"Urgot"},
		{"id":110,"engName":"Varus"},
		{"id":67,"engName":"Vayne"},
		{"id":45,"engName":"Veigar"},
		{"id":161,"engName":"Velkoz"},
		{"id":711,"engName":"Vex"},
		{"id":254,"engName":"Vi"},
		{"id":234,"engName":"Viego"},
		{"id":112,"engName":"Viktor"},
		{"id":8,"engName":"Vladimir"},
		{"id":106,"engName":"Volibear"},
		{"id":19,"engName":"Warwick"},
		{"id":498,"engName":"Xayah"},
		{"id":101,"engName":"Xerath"},
		{"id":5,"engName":"XinZhao"},
		{"id":157,"engName":"Yasuo"},
		{"id":777,"engName":"Yone"},
		{"id":83,"engName":"Yorick"},
		{"id":350,"engName":"Yuumi"},
		{"id":154,"engName":"Zac"},
		{"id":238,"engName":"Zed"},
		{"id":221,"engName":"Zeri"},
		{"id":115,"engName":"Ziggs"},
		{"id":26,"engName":"Zilean"},
		{"id":142,"engName":"Zoe"},
		{"id":143,"engName":"Zyra"}]

	$(document).ready(function(){
		getChampionImage()
		getChampionWinrate()

	})
	const urlParameter = window.location.search;
	const urlChampId = urlParameter.split('=')[1]
	console.log(urlChampId)

	let champ_name = ''
	for (let i = 0 ; i < data.length ; i ++ ) {
		if (data[i].id == urlChampId) {
			champ_name = data[i].engName
		}
	}

	function getChampionImage() {
		let img_html = `
											<br>
											<img src = https://ddragon.leagueoflegends.com/cdn/12.21.1/img/champion/${champ_name}.png>
											<br>`
		$('#champ_img').append(img_html)
	}

	let challData = [];
	let grandMasterData = [];
	let masterData = [];
	let diaData = [];


	function getChampionWinrate() {
		$.ajax({
			type : "GET",
			url : `/match/${urlChampId}`,     //"/match/${champ_name}",  //여길 어케 해야하나
			data : {}, //이 안에 데이터가 들어갈거임. // tier / item / total / pick/ win
			success : function (response) {
				console.log(response)

				for ( let i = 0; i < response.length; i++ ) {
					if (response[i].tier === "challenger" ) {  //티어가 챌린저 일때
						challData.push(response[i])
						// challData.sort((a, b) => b.pick - a.pick);
					}else if (response[i].tier === "grandmaster" ) {
						grandMasterData.push(response[i])
						// grandMasterData.sort((a, b) => b.pick - a.pick);
					}else if (response[i].tier === "master" ) {
						masterData.push(response[i])
						// masterData.sort((a, b) => b.pick - a.pick);
					}else if (response[i].tier === "diamond" ) {
						diaData.push(response[i])
						// diaData.sort((a, b) => b.pick - a.pick);
					}
				}

				for (let i = 0 ; i <challData.length ; i ++){

					let temp_html = `
															<div class="champ_Box">
																<img src = "http://ddragon.leagueoflegends.com/cdn/12.22.1/img/item/${challData[i].item}.png"/>
																<h5>승률 : ${challData[i].win} </h5>
																<h5>픽률 : ${challData[i].pick} </h5>
															</div>
														`

					$('#challData').append(temp_html)

				}

				for (let i = 0 ; i <grandMasterData.length ; i ++){

					let temp_html = `
														<div class="champ_Box2" style="word-break:break-all ">
															<img src = "http://ddragon.leagueoflegends.com/cdn/12.22.1/img/item/${grandMasterData[i].item}.png"/>
															<h5>승률 : ${grandMasterData[i].win} </h5>
															<h5>픽률 : ${grandMasterData[i].pick} </h5>
														</div>
													`

					$('#grandmasterData').append(temp_html)

				}

			}
		});



	}

</script>
<body>
<div id = champ_img>챔피언 분석</div>


<div id = "challData" >
	<p>Challenger</p>
</div>

<br>

<div class="clear" id="grandmasterData">
	<p>GrandMaster</p>
</div>



</body>
</html>